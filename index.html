<!doctype html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Gravity Maze</title>
  <script src="phaser.js"></script>
</head>
<body style="margin: 0px;">

  <script type="text/javascript">
    window.onload = function () {

      var gravity;

      function deviceOrientationListener(event) {
        gravity = event;        
      }

      if (window.DeviceOrientationEvent) {
        window.addEventListener("deviceorientation", deviceOrientationListener);
      } else {
        alert("Sorry, your browser doesn't support Device Orientation");
      }

      var game = new Phaser.Game(window.innerWidth, window.innerHeight, Phaser.AUTO, '', { preload: preload, create: create, update: update });
      var player;
      var walls;

      function preload() {

        game.load.image('green', 'assets/green.png');
        game.load.image('red', 'assets/red.png');
        game.load.image('black', 'assets/black.png');

      }

      function create() {

        game.physics.startSystem(Phaser.Physics.ARCADE);

        player = game.add.sprite(250, 250, "green");
        game.physics.arcade.enable(player);       

        player.body.collideWorldBounds = true;

        walls = game.add.group();
        walls.enableBody = true;

        var floor = game.add.sprite(0, 350, "red");
        floor.width = window.innerWidth;
        walls.add(floor);
        
        var ceiling = game.add.sprite(0, 0, "red");
        ceiling.width = window.innerWidth;
        walls.add(ceiling);
      }

      function update() {
        player.body.gravity.x = gravity.gamma;
        player.body.gravity.y = gravity.beta;

        game.physics.arcade.collide(player, walls);
      }

    };

  </script>

</body>
</html>
